
Red Potato - Vehicle Inspection Management System
=================================================

Thank you for installing {{ .Chart.Name }}!

Your release is named: {{ .Release.Name }}
Namespace: {{ .Release.Namespace }}

{{- if .Values.ingress.enabled }}

1. Access the application:
{{- range $host := .Values.ingress.hosts }}
   {{- if $.Values.ingress.tls }}
   https://{{ $host.host }}
   {{- else }}
   http://{{ $host.host }}
   {{- end }}
{{- end }}

{{- else }}

1. Get the application URL by running these commands:

   Frontend:
   export POD_NAME=$(kubectl get pods --namespace {{ .Release.Namespace }} -l "app.kubernetes.io/name={{ include "red-potato.name" . }},app.kubernetes.io/component=frontend" -o jsonpath="{.items[0].metadata.name}")
   kubectl --namespace {{ .Release.Namespace }} port-forward $POD_NAME 8080:80

   Then access http://localhost:8080

   Backend API:
   export POD_NAME=$(kubectl get pods --namespace {{ .Release.Namespace }} -l "app.kubernetes.io/name={{ include "red-potato.name" . }},app.kubernetes.io/component=backend" -o jsonpath="{.items[0].metadata.name}")
   kubectl --namespace {{ .Release.Namespace }} port-forward $POD_NAME 3000:3000

   Then access http://localhost:3000/health

{{- end }}

2. Run database migrations (if not done automatically):

   kubectl exec -it deploy/{{ include "red-potato.backend.fullname" . }} --namespace {{ .Release.Namespace }} -- npx prisma migrate deploy

3. Seed the database with initial users:

   kubectl exec -it deploy/{{ include "red-potato.backend.fullname" . }} --namespace {{ .Release.Namespace }} -- npm run prisma:seed

4. Check the status of your pods:

   kubectl get pods --namespace {{ .Release.Namespace }} -l "app.kubernetes.io/instance={{ .Release.Name }}"

5. View backend logs:

   kubectl logs -f deploy/{{ include "red-potato.backend.fullname" . }} --namespace {{ .Release.Namespace }}

{{- if and .Values.postgresql.enabled (not .Values.postgresql.external.enabled) }}

6. Connect to PostgreSQL:

   kubectl exec -it {{ include "red-potato.postgresql.fullname" . }}-0 --namespace {{ .Release.Namespace }} -- psql -U {{ .Values.postgresql.auth.username }} -d {{ .Values.postgresql.auth.database }}

{{- end }}

For more information, visit: https://github.com/teodorchr/red-potato
